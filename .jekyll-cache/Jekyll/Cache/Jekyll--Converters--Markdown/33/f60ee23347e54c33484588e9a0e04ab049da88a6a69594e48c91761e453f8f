I"í<p>I use <code class="language-plaintext highlighter-rouge">ipython</code> and <code class="language-plaintext highlighter-rouge">emacs</code> to do almost all of my data analysis work,
and I use them across many different machines and systems. Getting
<code class="language-plaintext highlighter-rouge">ipython</code> to work nicely in emacs across multiple versions is a bit
challenging, especially in the older versions.</p>

<h3 id="emacs-21">Emacs 21</h3>

<p>I still use some machines running Scientific Linux 5 (RHEL 5), with
<code class="language-plaintext highlighter-rouge">emacs 21.4.1</code>. In this version of <code class="language-plaintext highlighter-rouge">emacs</code>, the easiest way to get
<code class="language-plaintext highlighter-rouge">ipython</code> to work is my tricking the standard builtin <code class="language-plaintext highlighter-rouge">python.el</code> mode
into thinking it is seeing a normal <code class="language-plaintext highlighter-rouge">python</code> interpretter. We can do
this by using the <code class="language-plaintext highlighter-rouge">ipython --classic</code> flag. The following <code class="language-plaintext highlighter-rouge">.emacs</code>
snippet does this:</p>

<figure class="highlight"><pre><code class="language-cl" data-lang="cl"><span class="p">(</span><span class="k">setq</span> <span class="nv">py-python-command</span> <span class="s">"ipython"</span><span class="p">)</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">py-python-command-args</span> <span class="o">'</span><span class="p">(</span><span class="s">"-i"</span> <span class="s">"--classic"</span> <span class="s">"--pylab"</span><span class="p">))</span></code></pre></figure>

<p>We then get a working <code class="language-plaintext highlighter-rouge">ipython</code> prompt with <code class="language-plaintext highlighter-rouge">pylab</code> support but do not
get autocomplete or any of the other keyboard shortcuts. Executing
regions does work however, so the resulting interpreter is perfectly
useable.</p>

<h3 id="emacs-23">Emacs 23</h3>

<p>Some of the machines I use run Scientific Linux 6 (RHEL 6), which uses
<code class="language-plaintext highlighter-rouge">emacs 23.1.1</code>. The builtin <code class="language-plaintext highlighter-rouge">python.el</code> mode will no longer accept the
hack used above for <code class="language-plaintext highlighter-rouge">emacs 21</code>, and also cannot easily (to my
knowledge) be customised to accept <code class="language-plaintext highlighter-rouge">ipython</code>. Therefore, we must
install the external
<a href="http://svn.python.org/projects/python/trunk/Misc/python-mode.el"><code class="language-plaintext highlighter-rouge">python-mode.el</code></a>
and
<a href="https://raw.github.com/ipython/ipython/master/docs/emacs/ipython.el"><code class="language-plaintext highlighter-rouge">ipython.el</code></a>
to get a functioning <code class="language-plaintext highlighter-rouge">ipython</code> interpreter. The key here is to get
these files from the standard and most up to date sources (the ones I
just linked to). There are loads of other versions of both files lying
around online that may or may not work.</p>

<p>The <code class="language-plaintext highlighter-rouge">.emacs</code> snippet required is then</p>

<figure class="highlight"><pre><code class="language-cl" data-lang="cl"><span class="p">(</span><span class="nb">require</span> <span class="ss">'python-mode</span><span class="p">)</span>
<span class="p">(</span><span class="nb">require</span> <span class="ss">'ipython</span><span class="p">)</span>
<span class="p">(</span><span class="nv">setq-default</span> <span class="nv">py-python-command-args</span> <span class="o">'</span><span class="p">(</span><span class="s">"--pylab"</span> <span class="s">"--colors"</span> <span class="s">"LightBG"</span><span class="p">))</span></code></pre></figure>

<p><code class="language-plaintext highlighter-rouge">ipython.el</code> does a great job of supporting lots of <code class="language-plaintext highlighter-rouge">ipython</code>
features, so this setup works very nicely.</p>

<h3 id="emacs-24">Emacs 24</h3>

<p><code class="language-plaintext highlighter-rouge">emacs 24.3</code> features a much-improved built in <code class="language-plaintext highlighter-rouge">python.el</code> with
builtin <code class="language-plaintext highlighter-rouge">ipython</code> support in the <code class="language-plaintext highlighter-rouge">python.el</code> package. This updated
package is also compatible with <code class="language-plaintext highlighter-rouge">emacs 24.x</code>, and is included by
adding
<a href="http://repo.or.cz/w/emacs.git/blob_plain/refs/heads/emacs-24:/lisp/progmodes/python.el">this copy</a>
of <code class="language-plaintext highlighter-rouge">python.el</code> to your load path.  <code class="language-plaintext highlighter-rouge">ipython</code> can then be activated
simply by using this code in your <code class="language-plaintext highlighter-rouge">.emacs</code>:</p>

<figure class="highlight"><pre><code class="language-cl" data-lang="cl"><span class="p">(</span><span class="nb">require</span> <span class="ss">'python</span><span class="p">)</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">python-shell-interpreter</span> <span class="s">"ipython"</span><span class="p">)</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">python-shell-interpreter-args</span> <span class="s">"--pylab"</span><span class="p">)</span></code></pre></figure>

:ET